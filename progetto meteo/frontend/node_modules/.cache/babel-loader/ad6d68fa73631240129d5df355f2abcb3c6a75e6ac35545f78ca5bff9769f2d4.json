{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profile-view container mt-5\"\n};\nconst _hoisted_2 = {\n  class: \"card mt-4\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card mt-4\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  class: \"mb-3\"\n};\nconst _hoisted_7 = {\n  class: \"mb-3\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"alert alert-danger mt-3\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"alert alert-success mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", null, \"Profilo Utente\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \" Dati utente \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Username:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($options.user.username), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Email:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($options.user.email), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Ruolo:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($options.user.role), 1 /* TEXT */)])])]), _createElementVNode(\"div\", _hoisted_4, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \" Cambia password \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.changePassword && $options.changePassword(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_6, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"currentPassword\",\n    class: \"form-label\"\n  }, \"Password attuale\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.currentPassword = $event),\n    type: \"password\",\n    class: \"form-control\",\n    id: \"currentPassword\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.currentPassword]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"newPassword\",\n    class: \"form-label\"\n  }, \"Nuova password\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.newPassword = $event),\n    type: \"password\",\n    class: \"form-control\",\n    id: \"newPassword\",\n    required: \"\",\n    minlength: \"6\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.newPassword]])]), _cache[9] || (_cache[9] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Aggiorna password\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.success ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \"Password aggiornata con successo!\")) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","$options","user","username","email","role","_hoisted_4","_hoisted_5","onSubmit","_cache","_withModifiers","args","changePassword","_hoisted_6","for","$event","$data","form","currentPassword","type","id","required","_hoisted_7","newPassword","minlength","error","_hoisted_8","_createCommentVNode","success","_hoisted_9"],"sources":["C:\\Programmazione\\Wheater_Report\\progetto\\frontend\\src\\views\\ProfileView.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-view container mt-5\">\r\n    <h2>Profilo Utente</h2>\r\n    <div class=\"card mt-4\">\r\n      <div class=\"card-header\">\r\n        Dati utente\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p><strong>Username:</strong> {{ user.username }}</p>\r\n        <p><strong>Email:</strong> {{ user.email }}</p>\r\n        <p><strong>Ruolo:</strong> {{ user.role }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"card mt-4\">\r\n      <div class=\"card-header\">\r\n        Cambia password\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"changePassword\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"currentPassword\" class=\"form-label\">Password attuale</label>\r\n            <input v-model=\"form.currentPassword\" type=\"password\" class=\"form-control\" id=\"currentPassword\" required />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"newPassword\" class=\"form-label\">Nuova password</label>\r\n            <input v-model=\"form.newPassword\" type=\"password\" class=\"form-control\" id=\"newPassword\" required minlength=\"6\" />\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-primary\">Aggiorna password</button>\r\n        </form>\r\n        <div v-if=\"error\" class=\"alert alert-danger mt-3\">{{ error }}</div>\r\n        <div v-if=\"success\" class=\"alert alert-success mt-3\">Password aggiornata con successo!</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: \"ProfileView\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        currentPassword: '',\r\n        newPassword: ''\r\n      },\r\n      error: '',\r\n      success: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentUser']),\r\n    user() {\r\n      return this.currentUser || {};\r\n    }\r\n  },\r\n  methods: {\r\n    async changePassword() {\r\n      this.error = ''\r\n      this.success = false\r\n      try {\r\n        await axios.put(`http://localhost:3000/api/users/${this.user.id}/change-password`, this.form, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        })\r\n        this.success = true\r\n        this.form.currentPassword = ''\r\n        this.form.newPassword = ''\r\n        this.$emit('toast', 'Password aggiornata con successo!', 'success')\r\n      } catch (err) {\r\n        this.error = err.response?.data?.message || 'Errore durante l\\'aggiornamento della password.'\r\n        this.$emit('toast', this.error, 'danger')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script> "],"mappings":";;EACOA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAW;;EAIfA,KAAK,EAAC;AAAW;;EAOnBA,KAAK,EAAC;AAAW;;EAIfA,KAAK,EAAC;AAAW;;EAEbA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;;EAxB3BC,GAAA;EA8B0BD,KAAK,EAAC;;;EA9BhCC,GAAA;EA+B4BD,KAAK,EAAC;;;uBA9BhCE,mBAAA,CAiCM,OAjCNC,UAiCM,G,4BAhCJC,mBAAA,CAAuB,YAAnB,gBAAc,sBAClBA,mBAAA,CASM,OATNC,UASM,G,0BARJD,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAa,GAAC,eAEzB,sBACAI,mBAAA,CAIM,OAJNE,UAIM,GAHJF,mBAAA,CAAqD,Y,0BAAlDA,mBAAA,CAA0B,gBAAlB,WAAS,sBAR5BG,gBAAA,CAQqC,GAAC,GAAAC,gBAAA,CAAGC,QAAA,CAAAC,IAAI,CAACC,QAAQ,iB,GAC9CP,mBAAA,CAA+C,Y,0BAA5CA,mBAAA,CAAuB,gBAAf,QAAM,sBATzBG,gBAAA,CASkC,GAAC,GAAAC,gBAAA,CAAGC,QAAA,CAAAC,IAAI,CAACE,KAAK,iB,GACxCR,mBAAA,CAA8C,Y,0BAA3CA,mBAAA,CAAuB,gBAAf,QAAM,sBAVzBG,gBAAA,CAUkC,GAAC,GAAAC,gBAAA,CAAGC,QAAA,CAAAC,IAAI,CAACG,IAAI,iB,OAI3CT,mBAAA,CAmBM,OAnBNU,UAmBM,G,4BAlBJV,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAa,GAAC,mBAEzB,sBACAI,mBAAA,CAcM,OAdNW,UAcM,GAbJX,mBAAA,CAUO;IAVAY,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAnBrBC,cAAA,KAAAC,IAAA,KAmB+BV,QAAA,CAAAW,cAAA,IAAAX,QAAA,CAAAW,cAAA,IAAAD,IAAA,CAAc;MACnCf,mBAAA,CAGM,OAHNiB,UAGM,G,0BAFJjB,mBAAA,CAAwE;IAAjEkB,GAAG,EAAC,iBAAiB;IAACtB,KAAK,EAAC;KAAa,kBAAgB,sB,gBAChEI,mBAAA,CAA2G;IAtBvH,uBAAAa,MAAA,QAAAA,MAAA,MAAAM,MAAA,IAsB4BC,KAAA,CAAAC,IAAI,CAACC,eAAe,GAAAH,MAAA;IAAEI,IAAI,EAAC,UAAU;IAAC3B,KAAK,EAAC,cAAc;IAAC4B,EAAE,EAAC,iBAAiB;IAACC,QAAQ,EAAR;iDAAhFL,KAAA,CAAAC,IAAI,CAACC,eAAe,E,KAEtCtB,mBAAA,CAGM,OAHN0B,UAGM,G,0BAFJ1B,mBAAA,CAAkE;IAA3DkB,GAAG,EAAC,aAAa;IAACtB,KAAK,EAAC;KAAa,gBAAc,sB,gBAC1DI,mBAAA,CAAiH;IA1B7H,uBAAAa,MAAA,QAAAA,MAAA,MAAAM,MAAA,IA0B4BC,KAAA,CAAAC,IAAI,CAACM,WAAW,GAAAR,MAAA;IAAEI,IAAI,EAAC,UAAU;IAAC3B,KAAK,EAAC,cAAc;IAAC4B,EAAE,EAAC,aAAa;IAACC,QAAQ,EAAR,EAAQ;IAACG,SAAS,EAAC;iDAA3FR,KAAA,CAAAC,IAAI,CAACM,WAAW,E,+BAElC3B,mBAAA,CAAwE;IAAhEuB,IAAI,EAAC,QAAQ;IAAC3B,KAAK,EAAC;KAAkB,mBAAiB,qB,4BAEtDwB,KAAA,CAAAS,KAAK,I,cAAhB/B,mBAAA,CAAmE,OAAnEgC,UAAmE,EAAA1B,gBAAA,CAAdgB,KAAA,CAAAS,KAAK,oBA9BlEE,mBAAA,gBA+BmBX,KAAA,CAAAY,OAAO,I,cAAlBlC,mBAAA,CAA4F,OAA5FmC,UAA4F,EAAvC,mCAAiC,KA/B9FF,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}