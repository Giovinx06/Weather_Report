{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"weather-map-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, _cache[0] || (_cache[0] = [_createElementVNode(\"div\", {\n    id: \"weather-map\",\n    class: \"weather-map\"\n  }, null, -1 /* HOISTED */)]));\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_cache","_createElementVNode","id"],"sources":["C:\\Users\\Giovanni\\OneDrive\\Desktop\\Scuola\\TPI\\progetto meteo\\frontend\\src\\components\\WeatherMap.vue"],"sourcesContent":["<template>\r\n  <div class=\"weather-map-container\">\r\n    <div id=\"weather-map\" class=\"weather-map\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'WeatherMap',\r\n  props: {\r\n    weatherData: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      map: null,\r\n      markers: []\r\n    }\r\n  },\r\n  mounted() {\r\n    // Se Leaflet è disponibile, usa la libreria completa\r\n    if (typeof L !== 'undefined') {\r\n      this.initLeafletMap();\r\n    } else {\r\n      // Fallback a una mappa statica con posizionamento simulato\r\n      this.initStaticMap();\r\n    }\r\n  },\r\n  methods: {\r\n    initLeafletMap() {\r\n      // Inizializza mappa Leaflet\r\n      /* eslint-disable no-undef */\r\n      this.map = L.map('weather-map').setView([0, 0], 2);\r\n      \r\n      // Aggiungi layer di base OpenStreetMap\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n      }).addTo(this.map);\r\n      /* eslint-enable no-undef */\r\n      \r\n      // Aggiungi marker per i dati meteo\r\n      this.addWeatherMarkers();\r\n    },\r\n    initStaticMap() {\r\n      // Fallback mappa statica se Leaflet non è disponibile\r\n      const mapElement = document.getElementById('weather-map');\r\n      mapElement.innerHTML = `\r\n        <div class=\"static-map\">\r\n          <div class=\"static-map-overlay\">\r\n            <h3>Mappa Interattiva</h3>\r\n            <p>Per una migliore esperienza, installa Leaflet con \"npm install leaflet\"</p>\r\n          </div>\r\n          ${this.createStaticMarkers()}\r\n        </div>\r\n      `;\r\n    },\r\n    addWeatherMarkers() {\r\n      // Pulisci marker esistenti\r\n      this.markers.forEach(marker => {\r\n        if (this.map) {\r\n          marker.remove();\r\n        }\r\n      });\r\n      this.markers = [];\r\n      \r\n      // Aggiungi nuovi marker\r\n      this.weatherData.forEach(item => {\r\n        if (item.lat && item.lon) {\r\n          const popupContent = `\r\n            <div class=\"weather-popup\">\r\n              <h5>${item.city}, ${item.country}</h5>\r\n              <div class=\"weather-popup-details\">\r\n                <i class=\"${this.getWeatherIcon(item)}\" style=\"font-size: 24px;\"></i>\r\n                <span>${item.temperature}°C</span>\r\n              </div>\r\n              <div>${item.description}</div>\r\n            </div>\r\n          `;\r\n          \r\n          /* eslint-disable no-undef */\r\n          const marker = L.marker([item.lat, item.lon])\r\n            .addTo(this.map)\r\n            .bindPopup(popupContent);\r\n            \r\n          this.markers.push(marker);\r\n        }\r\n      });\r\n      \r\n      // Adatta la vista ai marker\r\n      if (this.markers.length > 0 && this.map) {\r\n        const group = new L.featureGroup(this.markers);\r\n        this.map.fitBounds(group.getBounds(), { padding: [30, 30] });\r\n      }\r\n      /* eslint-enable no-undef */\r\n    },\r\n    createStaticMarkers() {\r\n      // Crea marker statici per visualizzazione fallback\r\n      return this.weatherData\r\n        .filter(item => item.city) // Filtra elementi senza città\r\n        .map((item, index) => {\r\n          // Genera posizioni casuali per disposizione simile a mappa\r\n          const left = 10 + (index % 3) * 30 + Math.random() * 10;\r\n          const top = 20 + Math.floor(index / 3) * 25 + Math.random() * 10;\r\n          \r\n          return `\r\n            <div class=\"static-marker\" style=\"left: ${left}%; top: ${top}%;\">\r\n              <div class=\"static-marker-icon ${this.getWeatherClass(item)}\">\r\n                <i class=\"${this.getWeatherIcon(item)}\"></i>\r\n              </div>\r\n              <div class=\"static-marker-label\">${item.city}: ${item.temperature}°C</div>\r\n            </div>\r\n          `;\r\n        })\r\n        .join('');\r\n    },\r\n    getWeatherIcon(item) {\r\n      if (!item || !item.description) return 'fas fa-cloud fa-lg text-secondary';\r\n      const desc = item.description.toLowerCase();\r\n      \r\n      if (desc.includes('pioggia') || desc.includes('rain')) return 'fas fa-cloud-rain fa-lg text-info';\r\n      if (desc.includes('sereno') || desc.includes('clear') || desc.includes('sun')) return 'fas fa-sun fa-lg text-warning';\r\n      if (desc.includes('nuvol') || desc.includes('cloud')) return 'fas fa-cloud fa-lg text-secondary';\r\n      if (desc.includes('neve') || desc.includes('snow')) return 'fas fa-snowflake fa-lg text-info';\r\n      if (desc.includes('temporale') || desc.includes('storm') || desc.includes('thunder')) return 'fas fa-bolt fa-lg text-warning';\r\n      if (desc.includes('nebbia') || desc.includes('fog')) return 'fas fa-smog fa-lg text-secondary';\r\n      if (desc.includes('vento') || desc.includes('wind')) return 'fas fa-wind fa-lg text-info';\r\n      \r\n      return 'fas fa-cloud fa-lg text-secondary';\r\n    },\r\n    getWeatherClass(item) {\r\n      if (!item || !item.description) return '';\r\n      const desc = item.description.toLowerCase();\r\n      \r\n      if (desc.includes('pioggia') || desc.includes('rain')) return 'weather-rain';\r\n      if (desc.includes('sereno') || desc.includes('clear') || desc.includes('sun')) return 'weather-clear';\r\n      if (desc.includes('nuvol') || desc.includes('cloud')) return 'weather-cloud';\r\n      if (desc.includes('neve') || desc.includes('snow')) return 'weather-snow';\r\n      if (desc.includes('temporale') || desc.includes('storm') || desc.includes('thunder')) return 'weather-storm';\r\n      if (desc.includes('nebbia') || desc.includes('fog')) return 'weather-fog';\r\n      \r\n      return '';\r\n    }\r\n  },\r\n  watch: {\r\n    weatherData: {\r\n      handler() {\r\n        if (this.map) {\r\n          this.addWeatherMarkers();\r\n        } else {\r\n          this.initStaticMap();\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.weather-map-container {\r\n  width: 100%;\r\n  position: relative;\r\n  border-radius: 0.75rem;\r\n  overflow: hidden;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n}\r\n\r\n.weather-map {\r\n  height: 400px;\r\n  z-index: 1;\r\n}\r\n\r\n.static-map {\r\n  height: 400px;\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.static-map::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-image: url(\"data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\");\r\n  opacity: 0.3;\r\n}\r\n\r\n.static-map-overlay {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 10px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  padding: 10px 15px;\r\n  border-radius: 5px;\r\n  z-index: 2;\r\n}\r\n\r\n.static-marker {\r\n  position: absolute;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 2;\r\n}\r\n\r\n.static-marker-icon {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.static-marker-label {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  white-space: nowrap;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  padding: 2px 5px;\r\n  border-radius: 3px;\r\n  font-size: 12px;\r\n  margin-top: 3px;\r\n}\r\n\r\n.weather-popup {\r\n  padding: 5px;\r\n  text-align: center;\r\n}\r\n\r\n.weather-popup-details {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin: 8px 0;\r\n}\r\n\r\n/* Classi meteo */\r\n.weather-rain {\r\n  background-color: #e3f2fd;\r\n}\r\n\r\n.weather-clear {\r\n  background-color: #fff8e1;\r\n}\r\n\r\n.weather-cloud {\r\n  background-color: #eceff1;\r\n}\r\n\r\n.weather-snow {\r\n  background-color: #e1f5fe;\r\n}\r\n\r\n.weather-storm {\r\n  background-color: #e8eaf6;\r\n}\r\n\r\n.weather-fog {\r\n  background-color: #e0e0e0;\r\n}\r\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAuB;;uBAAlCC,mBAAA,CAEM,OAFNC,UAEM,EAAAC,MAAA,QAAAA,MAAA,OADJC,mBAAA,CAAgD;IAA3CC,EAAE,EAAC,aAAa;IAACL,KAAK,EAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}