{"ast":null,"code":"import { mapGetters } from 'vuex';\nexport default {\n  name: \"DashboardView\",\n  computed: {\n    ...mapGetters(['currentUser', 'weatherData']),\n    user() {\n      return this.currentUser || {};\n    }\n  },\n  methods: {\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      return date.toLocaleString();\n    },\n    rowClass(item) {\n      if (!item.description) return '';\n      const desc = item.description.toLowerCase();\n      if (desc.includes('rain')) return 'weather-rain';\n      if (desc.includes('clear') || desc.includes('sun')) return 'weather-clear';\n      if (desc.includes('cloud')) return 'weather-cloud';\n      if (desc.includes('snow')) return 'weather-snow';\n      if (desc.includes('storm') || desc.includes('thunder')) return 'weather-storm';\n      return '';\n    },\n    weatherIconClass(item) {\n      if (!item.description) return 'fas fa-cloud';\n      const desc = item.description.toLowerCase();\n      if (desc.includes('rain')) return 'fas fa-cloud-rain text-info';\n      if (desc.includes('clear') || desc.includes('sun')) return 'fas fa-sun text-warning';\n      if (desc.includes('cloud')) return 'fas fa-cloud text-secondary';\n      if (desc.includes('snow')) return 'fas fa-snowflake text-info';\n      if (desc.includes('storm') || desc.includes('thunder')) return 'fas fa-bolt text-warning';\n      return 'fas fa-cloud text-secondary';\n    },\n    getWeatherIconUrl(icon) {\n      // Se l'icona è già un URL completo, usala\n      if (icon && icon.startsWith('http')) {\n        return icon;\n      }\n      // Se l'icona è un codice OpenWeatherMap (es. \"01d.png\" o \"01d\")\n      else if (icon) {\n        // Se l'icona contiene già .png, usa il formato corretto\n        if (icon.includes('.png')) {\n          return `https://openweathermap.org/img/wn/${icon.replace('.png', '')}@2x.png`;\n        }\n        // Altrimenti aggiungi @2x.png\n        return `https://openweathermap.org/img/wn/${icon}@2x.png`;\n      }\n      // Fallback su un'icona generica se manca l'icona\n      return null;\n    }\n  },\n  mounted() {\n    if (this.weatherData.length === 0) {\n      this.$store.dispatch('fetchWeatherData').catch(() => {});\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","computed","user","currentUser","methods","formatDate","dateStr","date","Date","toLocaleString","rowClass","item","description","desc","toLowerCase","includes","weatherIconClass","getWeatherIconUrl","icon","startsWith","replace","mounted","weatherData","length","$store","dispatch","catch"],"sources":["C:\\Users\\Giovanni\\OneDrive\\Desktop\\Scuola\\TPI\\progetto meteo\\frontend\\src\\views\\DashboardView.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-view\">\r\n    <div class=\"container py-4\">\r\n      <!-- Header con benvenuto -->\r\n      <div class=\"dashboard-header mb-4\">\r\n        <div class=\"row align-items-center\">\r\n          <div class=\"col-md-6\">\r\n            <h1 class=\"display-5 fw-bold text-primary mb-1\">\r\n              <i class=\"fas fa-tachometer-alt me-2\"></i> Dashboard\r\n            </h1>\r\n            <p class=\"lead text-muted\">Benvenuto, {{ user.username }}!</p>\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <div class=\"alert alert-info border-0 shadow-sm d-flex align-items-center\" role=\"alert\">\r\n              <i class=\"fas fa-info-circle me-3 fs-4\"></i>\r\n              <div>Qui puoi visualizzare i tuoi dati e le informazioni meteo in tempo reale.</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Sezione con statistiche -->\r\n      <div class=\"row mb-4\">\r\n        <div class=\"col-md-4 mb-4 mb-md-0\">\r\n          <div class=\"card border-0 shadow-sm h-100\">\r\n            <div class=\"card-body text-center\">\r\n              <div class=\"display-4 text-primary mb-3\">\r\n                <i class=\"fas fa-user-circle\"></i>\r\n              </div>\r\n              <h5 class=\"card-title\">Profilo</h5>\r\n              <p class=\"card-text\">Gestisci i tuoi dati personali e le preferenze dell'account</p>\r\n              <router-link to=\"/profile\" class=\"btn btn-outline-primary\">Vai al profilo</router-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4 mb-4 mb-md-0\">\r\n          <div class=\"card border-0 shadow-sm h-100\">\r\n            <div class=\"card-body text-center\">\r\n              <div class=\"display-4 text-primary mb-3\">\r\n                <i class=\"fas fa-cloud-sun\"></i>\r\n              </div>\r\n              <h5 class=\"card-title\">Meteo</h5>\r\n              <p class=\"card-text\">Consulta le previsioni meteo in tempo reale per qualsiasi città</p>\r\n              <router-link to=\"/weather\" class=\"btn btn-outline-primary\">Vai al meteo</router-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4 mb-4 mb-md-0\">\r\n          <div class=\"card border-0 shadow-sm h-100\">\r\n            <div class=\"card-body text-center\">\r\n              <div class=\"display-4 text-primary mb-3\">\r\n                <i class=\"fas fa-history\"></i>\r\n              </div>\r\n              <h5 class=\"card-title\">Storico</h5>\r\n              <p class=\"card-text\">Visualizza lo storico delle tue ricerche meteo precedenti</p>\r\n              <button class=\"btn btn-outline-primary\">Visualizza storico</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Dati utente -->\r\n      <div class=\"card border-0 shadow-sm mb-4\">\r\n        <div class=\"card-header bg-white d-flex align-items-center py-3\">\r\n          <i class=\"fas fa-user-circle text-primary me-2 fs-4\"></i>\r\n          <h5 class=\"mb-0\">Dati utente</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4 mb-3 mb-md-0\">\r\n              <div class=\"p-3 border rounded bg-light\">\r\n                <div class=\"small text-muted mb-1\">Username</div>\r\n                <div class=\"fw-bold\">{{ user.username }}</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-4 mb-3 mb-md-0\">\r\n              <div class=\"p-3 border rounded bg-light\">\r\n                <div class=\"small text-muted mb-1\">Email</div>\r\n                <div class=\"fw-bold\">{{ user.email }}</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n              <div class=\"p-3 border rounded bg-light\">\r\n                <div class=\"small text-muted mb-1\">Ruolo</div>\r\n                <div class=\"fw-bold\">\r\n                  <span class=\"badge\" :class=\"user.role === 'admin' ? 'bg-danger' : 'bg-success'\">\r\n                    {{ user.role }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Dati Meteo -->\r\n      <div class=\"card border-0 shadow-sm\">\r\n        <div class=\"card-header bg-white d-flex align-items-center py-3\">\r\n          <i class=\"fas fa-cloud-sun-rain text-primary me-2 fs-4\"></i>\r\n          <h5 class=\"mb-0\">Dati Meteo Recenti</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div v-if=\"weatherData.length === 0\" class=\"text-center py-4\">\r\n            <i class=\"fas fa-cloud-rain fa-3x text-muted mb-3\"></i>\r\n            <p class=\"mb-0\">Nessun dato meteo disponibile.</p>\r\n            <router-link to=\"/weather\" class=\"btn btn-primary mt-3\">\r\n              <i class=\"fas fa-search me-2\"></i>Cerca meteo\r\n            </router-link>\r\n          </div>\r\n          <div v-else class=\"table-responsive\">\r\n            <table class=\"table table-hover align-middle weather-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Città</th>\r\n                  <th>Temperatura</th>\r\n                  <th>Condizione</th>\r\n                  <th>Data</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(item, idx) in weatherData.slice(0, 5)\" :key=\"idx\" :class=\"rowClass(item)\">\r\n                  <td><i class=\"fas fa-map-marker-alt me-2 text-primary\"></i>{{ item.city }}</td>\r\n                  <td>\r\n                    <span class=\"fw-bold\">{{ item.temperature }}°C</span>\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"d-flex align-items-center\">\r\n                      <div class=\"me-2\">\r\n                        <i :class=\"weatherIconClass(item)\" style=\"font-size: 24px; width: 40px; text-align: center;\"></i>\r\n                      </div>\r\n                      <span>{{ item.description }}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td>{{ formatDate(item.fetchDate || item.createdAt || item.date) }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <div v-if=\"weatherData.length > 5\" class=\"text-center mt-3\">\r\n              <router-link to=\"/weather\" class=\"btn btn-outline-primary\">\r\n                Visualizza tutti i dati\r\n              </router-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: \"DashboardView\",\r\n  computed: {\r\n    ...mapGetters(['currentUser', 'weatherData']),\r\n    user() {\r\n      return this.currentUser || {};\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate(dateStr) {\r\n      if (!dateStr) return '';\r\n      const date = new Date(dateStr);\r\n      return date.toLocaleString();\r\n    },\r\n    rowClass(item) {\r\n      if (!item.description) return '';\r\n      const desc = item.description.toLowerCase();\r\n      \r\n      if (desc.includes('rain')) return 'weather-rain';\r\n      if (desc.includes('clear') || desc.includes('sun')) return 'weather-clear';\r\n      if (desc.includes('cloud')) return 'weather-cloud';\r\n      if (desc.includes('snow')) return 'weather-snow';\r\n      if (desc.includes('storm') || desc.includes('thunder')) return 'weather-storm';\r\n      \r\n      return '';\r\n    },\r\n    weatherIconClass(item) {\r\n      if (!item.description) return 'fas fa-cloud';\r\n      const desc = item.description.toLowerCase();\r\n      \r\n      if (desc.includes('rain')) return 'fas fa-cloud-rain text-info';\r\n      if (desc.includes('clear') || desc.includes('sun')) return 'fas fa-sun text-warning';\r\n      if (desc.includes('cloud')) return 'fas fa-cloud text-secondary';\r\n      if (desc.includes('snow')) return 'fas fa-snowflake text-info';\r\n      if (desc.includes('storm') || desc.includes('thunder')) return 'fas fa-bolt text-warning';\r\n      \r\n      return 'fas fa-cloud text-secondary';\r\n    },\r\n    getWeatherIconUrl(icon) {\r\n      // Se l'icona è già un URL completo, usala\r\n      if (icon && icon.startsWith('http')) {\r\n        return icon;\r\n      }\r\n      // Se l'icona è un codice OpenWeatherMap (es. \"01d.png\" o \"01d\")\r\n      else if (icon) {\r\n        // Se l'icona contiene già .png, usa il formato corretto\r\n        if (icon.includes('.png')) {\r\n          return `https://openweathermap.org/img/wn/${icon.replace('.png', '')}@2x.png`;\r\n        }\r\n        // Altrimenti aggiungi @2x.png\r\n        return `https://openweathermap.org/img/wn/${icon}@2x.png`;\r\n      }\r\n      // Fallback su un'icona generica se manca l'icona\r\n      return null;\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.weatherData.length === 0) {\r\n      this.$store.dispatch('fetchWeatherData').catch(() => {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-header {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.card {\r\n  border-radius: 0.75rem;\r\n  overflow: hidden;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.card-header {\r\n  border-bottom: none;\r\n  font-weight: 500;\r\n}\r\n\r\n.weather-icon {\r\n  width: 40px;\r\n  height: 40px;\r\n}\r\n\r\n.weather-table th {\r\n  font-weight: 600;\r\n  border-top: none;\r\n  border-bottom-width: 1px;\r\n}\r\n\r\n.weather-table td {\r\n  padding: 0.75rem 1rem;\r\n}\r\n\r\n/* Classi per le righe della tabella in base alle condizioni meteo */\r\n.weather-rain {\r\n  background-color: rgba(227, 242, 253, 0.4);\r\n}\r\n\r\n.weather-clear {\r\n  background-color: rgba(255, 248, 225, 0.4);\r\n}\r\n\r\n.weather-cloud {\r\n  background-color: rgba(236, 239, 241, 0.4);\r\n}\r\n\r\n.weather-snow {\r\n  background-color: rgba(237, 247, 251, 0.4);\r\n}\r\n\r\n.weather-storm {\r\n  background-color: rgba(232, 234, 246, 0.4);\r\n}\r\n\r\n/* Responsive tweaks */\r\n@media (max-width: 767.98px) {\r\n  .display-5 {\r\n    font-size: 1.75rem;\r\n  }\r\n  \r\n  .lead {\r\n    font-size: 1rem;\r\n  }\r\n}\r\n</style> \r\n"],"mappings":"AAsJA,SAASA,UAAS,QAAS,MAAK;AAEhC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,QAAQ,EAAE;IACR,GAAGF,UAAU,CAAC,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;IAC7CG,IAAIA,CAAA,EAAG;MACL,OAAO,IAAI,CAACC,WAAU,IAAK,CAAC,CAAC;IAC/B;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,OAAO,EAAE;MAClB,IAAI,CAACA,OAAO,EAAE,OAAO,EAAE;MACvB,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,OAAO,CAAC;MAC9B,OAAOC,IAAI,CAACE,cAAc,CAAC,CAAC;IAC9B,CAAC;IACDC,QAAQA,CAACC,IAAI,EAAE;MACb,IAAI,CAACA,IAAI,CAACC,WAAW,EAAE,OAAO,EAAE;MAChC,MAAMC,IAAG,GAAIF,IAAI,CAACC,WAAW,CAACE,WAAW,CAAC,CAAC;MAE3C,IAAID,IAAI,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,cAAc;MAChD,IAAIF,IAAI,CAACE,QAAQ,CAAC,OAAO,KAAKF,IAAI,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE,OAAO,eAAe;MAC1E,IAAIF,IAAI,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAE,OAAO,eAAe;MAClD,IAAIF,IAAI,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,cAAc;MAChD,IAAIF,IAAI,CAACE,QAAQ,CAAC,OAAO,KAAKF,IAAI,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAE,OAAO,eAAe;MAE9E,OAAO,EAAE;IACX,CAAC;IACDC,gBAAgBA,CAACL,IAAI,EAAE;MACrB,IAAI,CAACA,IAAI,CAACC,WAAW,EAAE,OAAO,cAAc;MAC5C,MAAMC,IAAG,GAAIF,IAAI,CAACC,WAAW,CAACE,WAAW,CAAC,CAAC;MAE3C,IAAID,IAAI,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,6BAA6B;MAC/D,IAAIF,IAAI,CAACE,QAAQ,CAAC,OAAO,KAAKF,IAAI,CAACE,QAAQ,CAAC,KAAK,CAAC,EAAE,OAAO,yBAAyB;MACpF,IAAIF,IAAI,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAE,OAAO,6BAA6B;MAChE,IAAIF,IAAI,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,4BAA4B;MAC9D,IAAIF,IAAI,CAACE,QAAQ,CAAC,OAAO,KAAKF,IAAI,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAE,OAAO,0BAA0B;MAEzF,OAAO,6BAA6B;IACtC,CAAC;IACDE,iBAAiBA,CAACC,IAAI,EAAE;MACtB;MACA,IAAIA,IAAG,IAAKA,IAAI,CAACC,UAAU,CAAC,MAAM,CAAC,EAAE;QACnC,OAAOD,IAAI;MACb;MACA;MAAA,KACK,IAAIA,IAAI,EAAE;QACb;QACA,IAAIA,IAAI,CAACH,QAAQ,CAAC,MAAM,CAAC,EAAE;UACzB,OAAO,qCAAqCG,IAAI,CAACE,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,SAAS;QAC/E;QACA;QACA,OAAO,qCAAqCF,IAAI,SAAS;MAC3D;MACA;MACA,OAAO,IAAI;IACb;EACF,CAAC;EACDG,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACC,WAAW,CAACC,MAAK,KAAM,CAAC,EAAE;MACjC,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,kBAAkB,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CAAC;IACzD;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}