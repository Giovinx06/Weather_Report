{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"weather-view container mt-5\"\n};\nconst _hoisted_2 = {\n  class: \"col-auto\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"alert alert-danger\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"alert alert-info\"\n};\nconst _hoisted_5 = {\n  key: 2,\n  class: \"alert alert-secondary\"\n};\nconst _hoisted_6 = {\n  key: 3,\n  class: \"table table-striped mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"Meteo\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    class: \"row g-3 mb-4\",\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.fetchWeather && $options.fetchWeather(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.city = $event),\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"Inserisci una città\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.city]])]), _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"col-auto\"\n  }, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Cerca Meteo\")], -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"Caricamento...\")) : _createCommentVNode(\"v-if\", true), _ctx.weatherData.length === 0 && !$data.loading && !$data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \" Nessun dato meteo disponibile. Cerca una città per visualizzare i dati. \")) : _createCommentVNode(\"v-if\", true), _ctx.weatherData.length > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Città\"), _createElementVNode(\"th\", null, \"Temperatura\"), _createElementVNode(\"th\", null, \"Condizione\"), _createElementVNode(\"th\", null, \"Data ricerca\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.weatherData, (item, idx) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: idx\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.city), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.temperature) + \" °C\", 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.condition), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($options.formatDate(item.createdAt || item.date)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","fetchWeather","_hoisted_2","$event","$data","city","type","placeholder","required","error","_hoisted_3","_toDisplayString","_createCommentVNode","loading","_hoisted_4","_ctx","weatherData","length","_hoisted_5","_hoisted_6","_Fragment","_renderList","item","idx","temperature","condition","formatDate","createdAt","date"],"sources":["C:\\Programmazione\\Wheater_Report\\progetto\\frontend\\src\\views\\WeatherView.vue"],"sourcesContent":["<template>\r\n  <div class=\"weather-view container mt-5\">\r\n    <h2>Meteo</h2>\r\n    <form class=\"row g-3 mb-4\" @submit.prevent=\"fetchWeather\">\r\n      <div class=\"col-auto\">\r\n        <input v-model=\"city\" type=\"text\" class=\"form-control\" placeholder=\"Inserisci una città\" required />\r\n      </div>\r\n      <div class=\"col-auto\">\r\n        <button type=\"submit\" class=\"btn btn-primary\">Cerca Meteo</button>\r\n      </div>\r\n    </form>\r\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\r\n    <div v-if=\"loading\" class=\"alert alert-info\">Caricamento...</div>\r\n    <div v-if=\"weatherData.length === 0 && !loading && !error\" class=\"alert alert-secondary\">\r\n      Nessun dato meteo disponibile. Cerca una città per visualizzare i dati.\r\n    </div>\r\n    <table v-if=\"weatherData.length > 0\" class=\"table table-striped mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th>Città</th>\r\n          <th>Temperatura</th>\r\n          <th>Condizione</th>\r\n          <th>Data ricerca</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(item, idx) in weatherData\" :key=\"idx\">\r\n          <td>{{ item.city }}</td>\r\n          <td>{{ item.temperature }} °C</td>\r\n          <td>{{ item.condition }}</td>\r\n          <td>{{ formatDate(item.createdAt || item.date) }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: \"WeatherView\",\r\n  data() {\r\n    return {\r\n      city: '',\r\n      loading: false,\r\n      error: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['weatherData'])\r\n  },\r\n  methods: {\r\n    async fetchWeather() {\r\n      this.error = ''\r\n      this.loading = true\r\n      try {\r\n        await this.$store.dispatch('fetchNewWeatherData', this.city)\r\n        await this.$store.dispatch('fetchWeatherData')\r\n      } catch (err) {\r\n        this.error = err.response?.data?.message || 'Errore durante il recupero dei dati meteo.'\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    formatDate(dateStr) {\r\n      if (!dateStr) return '';\r\n      const date = new Date(dateStr);\r\n      return date.toLocaleString();\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.weatherData.length === 0) {\r\n      this.$store.dispatch('fetchWeatherData').catch(() => {})\r\n    }\r\n  }\r\n}\r\n</script> "],"mappings":";;EACOA,KAAK,EAAC;AAA6B;;EAG/BA,KAAK,EAAC;AAAU;;EAJ3BC,GAAA;EAWsBD,KAAK,EAAC;;;EAX5BC,GAAA;EAYwBD,KAAK,EAAC;;;EAZ9BC,GAAA;EAa+DD,KAAK,EAAC;;;EAbrEC,GAAA;EAgByCD,KAAK,EAAC;;;uBAf7CE,mBAAA,CAiCM,OAjCNC,UAiCM,G,0BAhCJC,mBAAA,CAAc,YAAV,OAAK,sBACTA,mBAAA,CAOO;IAPDJ,KAAK,EAAC,cAAc;IAAEK,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAHtCC,cAAA,KAAAC,IAAA,KAGgDC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;MACtDJ,mBAAA,CAEM,OAFNO,UAEM,G,gBADJP,mBAAA,CAAoG;IAL5G,uBAAAE,MAAA,QAAAA,MAAA,MAAAM,MAAA,IAKwBC,KAAA,CAAAC,IAAI,GAAAF,MAAA;IAAEG,IAAI,EAAC,MAAM;IAACf,KAAK,EAAC,cAAc;IAACgB,WAAW,EAAC,qBAAqB;IAACC,QAAQ,EAAR;iDAAzEJ,KAAA,CAAAC,IAAI,E,+BAEtBV,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAU,IACnBI,mBAAA,CAAkE;IAA1DW,IAAI,EAAC,QAAQ;IAACf,KAAK,EAAC;KAAkB,aAAW,E,iDAGlDa,KAAA,CAAAK,KAAK,I,cAAhBhB,mBAAA,CAA8D,OAA9DiB,UAA8D,EAAAC,gBAAA,CAAdP,KAAA,CAAAK,KAAK,oBAXzDG,mBAAA,gBAYeR,KAAA,CAAAS,OAAO,I,cAAlBpB,mBAAA,CAAiE,OAAjEqB,UAAiE,EAApB,gBAAc,KAZ/DF,mBAAA,gBAaeG,IAAA,CAAAC,WAAW,CAACC,MAAM,WAAWb,KAAA,CAAAS,OAAO,KAAKT,KAAA,CAAAK,KAAK,I,cAAzDhB,mBAAA,CAEM,OAFNyB,UAEM,EAFmF,2EAEzF,KAfJN,mBAAA,gBAgBiBG,IAAA,CAAAC,WAAW,CAACC,MAAM,Q,cAA/BxB,mBAAA,CAiBQ,SAjBR0B,UAiBQ,G,0BAhBNxB,mBAAA,CAOQ,gBANNA,mBAAA,CAKK,aAJHA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAoB,YAAhB,aAAW,GACfA,mBAAA,CAAmB,YAAf,YAAU,GACdA,mBAAA,CAAqB,YAAjB,cAAY,E,wBAGpBA,mBAAA,CAOQ,iB,kBANNF,mBAAA,CAKK2B,SAAA,QA/BbC,WAAA,CA0BkCN,IAAA,CAAAC,WAAW,EA1B7C,CA0BoBM,IAAI,EAAEC,GAAG;yBAArB9B,mBAAA,CAKK;MALmCD,GAAG,EAAE+B;IAAG,IAC9C5B,mBAAA,CAAwB,YAAAgB,gBAAA,CAAjBW,IAAI,CAACjB,IAAI,kBAChBV,mBAAA,CAAkC,YAAAgB,gBAAA,CAA3BW,IAAI,CAACE,WAAW,IAAG,KAAG,iBAC7B7B,mBAAA,CAA6B,YAAAgB,gBAAA,CAAtBW,IAAI,CAACG,SAAS,kBACrB9B,mBAAA,CAAsD,YAAAgB,gBAAA,CAA/CX,QAAA,CAAA0B,UAAU,CAACJ,IAAI,CAACK,SAAS,IAAIL,IAAI,CAACM,IAAI,kB;wCA9BvDhB,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}