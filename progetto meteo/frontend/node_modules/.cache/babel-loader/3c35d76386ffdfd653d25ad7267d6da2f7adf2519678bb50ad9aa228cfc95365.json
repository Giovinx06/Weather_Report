{"ast":null,"code":"import { mapGetters } from 'vuex';\nimport axios from 'axios';\nexport default {\n  name: \"ProfileView\",\n  data() {\n    return {\n      form: {\n        currentPassword: '',\n        newPassword: ''\n      },\n      error: '',\n      success: false\n    };\n  },\n  computed: {\n    ...mapGetters(['currentUser']),\n    user() {\n      return this.currentUser || {};\n    }\n  },\n  methods: {\n    async changePassword() {\n      this.error = '';\n      this.success = false;\n      try {\n        await axios.put(`http://localhost:3000/api/users/${this.user.id}/change-password`, this.form, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        this.success = true;\n        this.form.currentPassword = '';\n        this.form.newPassword = '';\n        this.$emit('toast', 'Password aggiornata con successo!', 'success');\n      } catch (err) {\n        this.error = err.response?.data?.message || 'Errore durante l\\'aggiornamento della password.';\n        this.$emit('toast', this.error, 'danger');\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","axios","name","data","form","currentPassword","newPassword","error","success","computed","user","currentUser","methods","changePassword","put","id","headers","Authorization","localStorage","getItem","$emit","err","response","message"],"sources":["C:\\Programmazione\\Wheater_Report\\progetto\\frontend\\src\\views\\ProfileView.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-view container mt-5\">\r\n    <h2>Profilo Utente</h2>\r\n    <div class=\"card mt-4\">\r\n      <div class=\"card-header\">\r\n        Dati utente\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p><strong>Username:</strong> {{ user.username }}</p>\r\n        <p><strong>Email:</strong> {{ user.email }}</p>\r\n        <p><strong>Ruolo:</strong> {{ user.role }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"card mt-4\">\r\n      <div class=\"card-header\">\r\n        Cambia password\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"changePassword\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"currentPassword\" class=\"form-label\">Password attuale</label>\r\n            <input v-model=\"form.currentPassword\" type=\"password\" class=\"form-control\" id=\"currentPassword\" required />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"newPassword\" class=\"form-label\">Nuova password</label>\r\n            <input v-model=\"form.newPassword\" type=\"password\" class=\"form-control\" id=\"newPassword\" required minlength=\"6\" />\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-primary\">Aggiorna password</button>\r\n        </form>\r\n        <div v-if=\"error\" class=\"alert alert-danger mt-3\">{{ error }}</div>\r\n        <div v-if=\"success\" class=\"alert alert-success mt-3\">Password aggiornata con successo!</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: \"ProfileView\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        currentPassword: '',\r\n        newPassword: ''\r\n      },\r\n      error: '',\r\n      success: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['currentUser']),\r\n    user() {\r\n      return this.currentUser || {};\r\n    }\r\n  },\r\n  methods: {\r\n    async changePassword() {\r\n      this.error = ''\r\n      this.success = false\r\n      try {\r\n        await axios.put(`http://localhost:3000/api/users/${this.user.id}/change-password`, this.form, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        })\r\n        this.success = true\r\n        this.form.currentPassword = ''\r\n        this.form.newPassword = ''\r\n        this.$emit('toast', 'Password aggiornata con successo!', 'success')\r\n      } catch (err) {\r\n        this.error = err.response?.data?.message || 'Errore durante l\\'aggiornamento della password.'\r\n        this.$emit('toast', this.error, 'danger')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script> "],"mappings":"AAsCA,SAASA,UAAS,QAAS,MAAK;AAChC,OAAOC,KAAI,MAAO,OAAM;AAExB,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,eAAe,EAAE,EAAE;QACnBC,WAAW,EAAE;MACf,CAAC;MACDC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGT,UAAU,CAAC,CAAC,aAAa,CAAC,CAAC;IAC9BU,IAAIA,CAAA,EAAG;MACL,OAAO,IAAI,CAACC,WAAU,IAAK,CAAC,CAAC;IAC/B;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,cAAcA,CAAA,EAAG;MACrB,IAAI,CAACN,KAAI,GAAI,EAAC;MACd,IAAI,CAACC,OAAM,GAAI,KAAI;MACnB,IAAI;QACF,MAAMP,KAAK,CAACa,GAAG,CAAC,mCAAmC,IAAI,CAACJ,IAAI,CAACK,EAAE,kBAAkB,EAAE,IAAI,CAACX,IAAI,EAAE;UAC5FY,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UACxD;QACF,CAAC;QACD,IAAI,CAACX,OAAM,GAAI,IAAG;QAClB,IAAI,CAACJ,IAAI,CAACC,eAAc,GAAI,EAAC;QAC7B,IAAI,CAACD,IAAI,CAACE,WAAU,GAAI,EAAC;QACzB,IAAI,CAACc,KAAK,CAAC,OAAO,EAAE,mCAAmC,EAAE,SAAS;MACpE,EAAE,OAAOC,GAAG,EAAE;QACZ,IAAI,CAACd,KAAI,GAAIc,GAAG,CAACC,QAAQ,EAAEnB,IAAI,EAAEoB,OAAM,IAAK,iDAAgD;QAC5F,IAAI,CAACH,KAAK,CAAC,OAAO,EAAE,IAAI,CAACb,KAAK,EAAE,QAAQ;MAC1C;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}